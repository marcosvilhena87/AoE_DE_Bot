{
  "profile": "aoe1de",
  "threshold": 0.80,
  "threshold_fallback": 0.68,
  "scales": [0.84, 0.88, 0.92, 0.96, 1.0, 1.04, 1.08, 1.12, 1.16],
  "loop_minutes": 6,
  "debug": false,
  "ocr_debug": true,
  "ocr_debug_success": false,
  "//ocr_debug_success": "Save grayscale and threshold images even when OCR succeeds.",
  "verbose_logging": false,
  "ocr_conf_threshold": 45,
  "//ocr_conf_threshold": "Minimum OCR confidence (0-100); default 60. Tight ROIs may require 45-50.",
  "ocr_conf_min": 25,
  "//ocr_conf_min": "Lowest confidence allowed after adaptive decay.",
  "ocr_conf_decay": 0.8,
  "//ocr_conf_decay": "Multiplier applied to the confidence threshold after each failed OCR attempt.",
  "ocr_conf_max_attempts": 10,
  "//ocr_conf_max_attempts": "Full OCR retries before only lowering the confidence threshold.",
  "allow_low_conf_digits": false,
  "//allow_low_conf_digits": "Return digits that look like numbers even when OCR confidence is below the threshold.",
  "allow_low_conf_population": false,
  "//allow_low_conf_population": "Accept population digits even when confidence is below the threshold; enable only if population OCR is reliable. Cannot be combined with 'treat_low_conf_as_failure'.",
  "allow_zero_confidence_digits": true,
  "//allow_zero_confidence_digits": "Treat all-zero OCR confidences as unknown instead of failure.",
  "treat_low_conf_as_failure": true,
    "//treat_low_conf_as_failure": "Return None when OCR confidence is below threshold. Incompatible with 'allow_low_conf_population'.",
    "wood_stockpile_low_conf_fallback": true,
    "food_stockpile_low_conf_fallback": true,
    "//food_stockpile_low_conf_fallback": "Set true to reuse last value on low-confidence OCR.",
    "gold_stockpile_low_conf_fallback": false,
    "stone_stockpile_low_conf_fallback": false,
    "population_limit_low_conf_fallback": false,
    "//population_limit_low_conf_fallback": "Return best OCR digits after ocr_retry_limit attempts even if confidence is low or ambiguous; set true to enable.",
    "idle_villager_low_conf_fallback": false,
    "//idle_villager_low_conf_fallback": "Set true to reuse last value on low-confidence OCR.",
    "idle_villager_low_conf_streak": 5,
    "//*_low_conf_fallback": "Use cached value when OCR confidence is low.",
    "wood_stockpile_ocr_conf_threshold": 45,
    "wood_stockpile_color_pass": true,
    "//wood_stockpile_color_pass": "Validate wood stockpile with a second color-mask OCR pass.",
    "food_stockpile_color_pass": true,
    "//food_stockpile_color_pass": "Validate food stockpile with a second color-mask OCR pass.",
    "food_stockpile_ocr_conf_threshold": 45,
    "gold_stockpile_ocr_conf_threshold": 45,
    "stone_stockpile_ocr_conf_threshold": 45,
    "population_limit_ocr_conf_threshold": 45,
    "idle_villager_ocr_conf_threshold": 55,
    "//*_ocr_conf_threshold": "Optional per-resource OCR confidence overrides.",
    "food_stockpile_max_width": 60,
    "//food_stockpile_max_width": "Maximum width of the food stockpile ROI.",
    "ocr_retry_limit": 3,
    "//ocr_retry_limit": "Consecutive OCR failures before using fallback value.",
    "ocr_roi_expand_base": 3,
    "//ocr_roi_expand_base": "Base pixel margin to expand OCR ROI after a miss.",
    "ocr_roi_expand_step": 3,
    "//ocr_roi_expand_step": "Additional pixels to grow the OCR ROI per consecutive failure.",
    "ocr_roi_expand_growth": 2.2,
    "//ocr_roi_expand_growth": "Exponent controlling ROI growth rate; >1 grows faster.",
    "population_ocr_roi_expand_base": 2,
    "//population_ocr_roi_expand_base": "Base pixel margin to expand population ROI after a miss.",
    "population_ocr_roi_expand_step": 2,
    "//population_ocr_roi_expand_step": "Additional pixels to grow the population ROI per consecutive failure.",
    "population_ocr_roi_expand_growth": 2.0,
    "//population_ocr_roi_expand_growth": "Exponent controlling population ROI growth rate; >1 grows faster.",
    "population_idle_padding": 6,
    "//population_idle_padding": "Pixels to keep between population ROI and idle villager icon.",
    "ocr_kernel_size": 1,
    "ocr_top_crop": 2,
    "ocr_top_crop_overrides": {
      "population_limit": 0,
      "idle_villager": 0
    },
    "ocr_blur_kernel": 3,
    "//ocr_blur_kernel": "Median blur kernel before OCR; set >1 to enable or 0 to disable.",
  "ocr_bilateral": [7, 60, 60],
  "//ocr_bilateral": "Bilateral filter params [d, sigmaColor, sigmaSpace]; set null or [] to disable.",
  "ocr_equalize_hist": true,
  "//ocr_equalize_hist": "Apply histogram equalization; false to disable or object for CLAHE.",
  "ocr_contrast_stretch": true,
  "//ocr_contrast_stretch": "Rescale intensities before thresholding; true for min-max or object with {alpha,beta}.",
  "ocr_psm_list": [7, 6, 11, 13],
  "ocr_zero_variance": 15,
  "ocr_ws_dilate_var": 500,
  "//ocr_ws_dilate_var": "Variance threshold for wood stockpile dilation; <=0 disables.",
  "wood_stockpile_dilate": false,
  "//wood_stockpile_dilate": "Force dilation for wood stockpile masks; enable if your HUD requires it.",
  "population_morph_close": true,
  "//population_morph_close": "Apply morphological closing to population limit ROI; false to disable or object with {\"kernel\":[1,3], \"variance_threshold\":2000}.",
  "tesseract_path": "C:\\Program Files\\Tesseract-OCR\\tesseract.exe",
  "resource_cache_ttl": 1.5,
  "resource_cache_max_age": null,
  "resource_cache_tolerance": 100,
  "disable_roi_overrides_on_calibration": false,
  "roi_variance_threshold": 5,
  "keys": {
    "idle_vill": ".",
    "build_menu": "b",
    "house": "e",
    "select_tc": "h",
    "train_vill": "q",
    "granary": "g",
    "storage_pit": "s"
  },
    "resource_panel": {
        "match_threshold": 0.8,
        "scales": [0.9, 0.95, 1.0, 1.05, 1.1],
        "roi_padding_left": [2, 2, 0, 0, 0, 0],
        "roi_padding_right": [4, 4, 0, 0, 0, 0],
        "max_width": [120, 160, 160, 160, 160, 160],
        "min_width": [5, 30, 5, 5, 5, 30],
        "min_required_width": 12,
          "idle_roi_extra_width": 0,
        "min_pop_width": 60,
        "pop_roi_extra_width": 12,
        "top_pct": 0.06,
        "height_pct": 0.88,
        "icon_trim_pct": [0.28, 0.30, 0.30, 0.30, 0.30, 0.00],
        "right_trim_pct": 0.02,
        "debug_failed_ocr": true
      },
  "hud_icons": {
    "required": [
      "wood_stockpile",
      "food_stockpile",
      "gold_stockpile",
      "stone_stockpile",
      "population_limit",
      "idle_villager"
    ],
    "optional": []
  },
  "wood_stockpile_roi": {
    "top_pct": 0.111,
    "height_pct": 0.027,
    "left_pct": 0.187,
    "width_pct": 0.033
  },
  "food_stockpile_roi": {
    "top_pct": 0.111,       
    "height_pct": 0.027,    
    "left_pct": 0.236,      
    "width_pct": 0.03       
  },
  "gold_stockpile_roi": {
    "top_pct": 0.111,
    "height_pct": 0.027,
    "left_pct": 0.282,
    "width_pct": 0.03
  },
  "stone_stockpile_roi": {
    "top_pct": 0.111,
    "height_pct": 0.027,
    "left_pct": 0.328,
    "width_pct": 0.03
  },
  "population_limit_roi": {
    "top_pct": 0.111,
    "height_pct": 0.027,
    "left_pct": 0.374,
    "width_pct": 0.03
  },
  "//population_limit_roi": "Remove this block to use automatic HUD detection; oversized ROIs can overlap the idle-villager icon and break OCR.",
  "idle_villager_roi": {
    "top_pct": 0.10,
    "height_pct": 0.06,
    "left_pct": 0.84,
    "width_pct": 0.04
  },
  "profiles": {
      "aoe1de": {
        "resource_panel": {
          "match_threshold": 0.82
        }
      }
    },
  "areas": {
    "food_spot": [0.46, 0.7],
    "wood_spot": [0.62, 0.55],
    "house_spot": [0.47, 0.72],
    "granary_spot": [0.44, 0.66],
    "storage_spot": [0.58, 0.52],
    "pop_box": [0.0, 0.0, 0.1, 0.1],
    "//pop_box": "[x, y, w, h] como frações da tela; calibrar depois."
  },
  "timers": {
    "house_interval": 45.0,
    "idle_gap": 0.35,
    "loop_sleep": 0.7
  }
}
